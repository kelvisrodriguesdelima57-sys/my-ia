<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My IA</title>
<style>
body{margin:0;padding:0;font-family:sans-serif;background:#f0f2f5;display:flex;justify-content:center;align-items:center;height:100vh;}
#app{width:360px;background:#fff;border-radius:12px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,0.15);}
header{background:#1db954;color:#fff;text-align:center;padding:1rem;}
#chat-window{flex:1;padding:1rem;overflow-y:auto;display:flex;flex-direction:column;gap:0.5rem;}
.message{padding:0.5rem 1rem;border-radius:16px;max-width:80%;word-wrap:break-word;}
.message.bot{background:#e0e0e0;align-self:flex-start;}
.message.user{background:#1db954;color:#fff;align-self:flex-end;}
#input-area{display:flex;border-top:1px solid #ddd;}
#input-area input{flex:1;padding:0.8rem;border:none;outline:none;}
#input-area button{background:#1db954;color:white;border:none;padding:0 1rem;cursor:pointer;}
</style>
</head>
<body>
<div id="app">
<header>
<h1>My IA</h1>
</header>
<div id="chat-window">
<div class="message bot">Olá! Estou pronto para ajudá-lo.</div>
</div>
<div id="input-area">
<input type="text" id="user-input" placeholder="Digite sua mensagem...">
<button id="send-btn">Enviar</button>
</div>
</div>
<script>
const chatWindow = document.getElementById('chat-window');
const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');

async function askMetaIA(userText) {
  const response = await fetch('http://localhost:3000/ask', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ question: userText })
  });
  const data = await response.json();
  return data.answer;
}

function addMessage(text, type) {
  const msg = document.createElement('div');
  msg.classList.add('message', type);
  msg.textContent = text;
  chatWindow.appendChild(msg);
  chatWindow.scrollTop = chatWindow.scrollHeight;
}

sendBtn.addEventListener('click', async () => {
  const text = userInput.value.trim();
  if (!text) return;
  addMessage(text, 'user');
  userInput.value = '';
  addMessage("Digitando...", 'bot');
  const botMsg = chatWindow.querySelector('.message.bot:last-child');
  const answer = await askMetaIA(text);
  botMsg.remove();
  addMessage(answer, 'bot');
});

userInput.addEventListener('keypress', e => {
  if (e.key === 'Enter') sendBtn.click();
});
</script>
</body>
</html>
